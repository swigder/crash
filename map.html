<!DOCTYPE html>

<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css"
          integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A=="
          crossorigin=""/>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.2/css/bulma.min.css">

    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.4.1/dist/MarkerCluster.css"/>
    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.4.1/dist/MarkerCluster.Default.css"/>

    <link rel="stylesheet" href="styles.css"/>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/gh/alpinejs/alpine@v2.x.x/dist/alpine.min.js" defer></script>

    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"
            integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA=="
            crossorigin=""></script>
    <script src="https://unpkg.com/leaflet.markercluster@1.4.1/dist/leaflet.markercluster.js"></script>

    <title>Traffic fatalities - PG County</title>
</head>

<body>

<section class="section">
    <div class="container">
        <h1 class="title">
            Traffic fatalities - PG County
        </h1>
    </div>
</section>

<div class="columns" id="main">
    <div id="map" class="column is-three-quarters"></div>
    <div class="column" x-data="{detail: null}" x-on:items-load.window="detail = $event.detail">
        <template x-if="detail">
            <table class="table">
                <tbody>
                <tr>
                    <th class="has-text-right">Case</th>
                    <td x-text="detail.case_id"></td>
                </tr>
                <tr>
                    <th class="has-text-right">Year</th>
                    <td x-text="detail.year"></td>
                </tr>
                <tr>
                    <th class="has-text-right">Injuries</th>
                    <td>
                        <template x-for="injury in detail.injuries" :key="injury">
                            <dl><span x-text="injury.person"></span> - <span x-text="injury.severity"></span></dl>
                        </template>
                    </td>
                </tr>
                <tr>
                    <th class="has-text-right">Vehicles</th>
                    <td x-text="detail.num_vehicles"></td>
                </tr>
                </tbody>
            </table>
        </template>
    </div>
</div>

<div class="columns">
    <div class="column" x-data="{detail: {crash_count: 0, fatality_count: 0}}"
         x-on:count-updated.window="detail = $event.detail">
        <table class="table">
            <tbody>
            <tr>
                <th class="has-text-right">Crashes</th>
                <td x-text="detail.crash_count"></td>
                <th class="has-text-right">Fatalities</th>
                <td x-text="detail.fatality_count"></td>
            </tr>
            </tbody>
        </table>
    </div>
</div>

<script src="script.js"></script>

</body>
</html>
